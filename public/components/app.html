<link rel="import" href="../vendor/polymer/polymer.html">
<link rel="import" href="../vendor/iron-ajax/iron-ajax.html">
<link rel="import" href="../vendor/paper-button/paper-button.html">
<link rel="import" href="../vendor/paper-fab/paper-fab.html">
<link rel="import" href="../vendor/iron-icons/iron-icons.html">
<link rel="import" href="../vendor/paper-spinner/paper-spinner.html">
<link rel="import" href="../vendor/neon-animation/neon-animated-pages.html">
<link rel="import" href="../vendor/iron-image/iron-image.html">
<link rel="import" href="../vendor/paper-header-panel/paper-header-panel.html">

<link rel="import" href="althingi-pagination.html">
<link rel="import" href="althingi-assembly.html">
<link rel="import" href="althingi-plenary.html">
<link rel="import" href="althingi-issue.html">
<link rel="import" href="althingi-congressman.html">

<dom-module id="althingi-app">
    <template>
        <paper-header-panel class="flex" mode="standard">
            <paper-toolbar>
                <div center horizontal layout toolbar-tools style-scope paper-toolbar>
                    <paper-fab mini icon="done" on-click="handleNavigateBegin"></paper-fab>
                </div>

            </paper-toolbar>
        </paper-header-panel>
        <neon-animated-pages id="pages" selected="0">
            <div>
                <header>
                    <h1>Assemblies</h1>
                </header>
                <althingi-assembly-list
                        on-plenaries-get="handleGetPlenaries"
                        on-issues-get="handleGetIssues"
                ></althingi-assembly-list>
            </div>
            <div>
            </div>
            <div>
            </div>

        </neon-animated-pages>
    </template>
    <script>
        Polymer({
            is: 'althingi-app',

            handleGetPlenaries: function (event) {
                var plenaryContainer = document.createElement('althingi-plenaries');
                plenaryContainer.setAttribute('src', event.detail);
                this.$.pages.selected = 2;
                this.$.pages.children[2].appendChild(plenaryContainer);
                this.querySelector('paper-header-panel paper-fab').setAttribute('icon', 'reply');
            },

            handleGetIssues: function (event) {
                var issueContainer = document.createElement('althingi-issue');
                issueContainer.setAttribute('src', event.detail);
                this.$.pages.selected = 1;
                this.$.pages.children[1].appendChild(issueContainer);

            },

            handleNavigateBegin: function () {
                this.$.pages.selected = 0;
            }
        })
    </script>
</dom-module>
