<?xml version="1.0"?>
<root>
    <resource>
        <path>/</path>
        <method verb="GET">
            <description>This document</description>
        </method>
    </resource>

    <resource>
        <path>/loggjafarthing</path>
        <method verb="GET">
            <description>Get a list of all assemblies. The list will be sorted in reverse order. Current assembly
                being the first one. This resource is returned in chunks. Range header plays a big part
                in that.</description>
            <request>
                <headers>
                    <param name="Range" value="items=0-100">Indicate how big the chunk should be</param>
                </headers>
                <query>
                    <param name="order" value="asc|desc">Order of list</param>
                </query>
            </request>
            <response>
                <headers>
                    <param name="Content-Range" value="items 0-10/100">How much is returned</param>
                    <param name="Range-Unit" value="items">What kind of items returned</param>
                </headers>
                <status>
                    <code value="206">Partial Content</code>
                </status>
                <output>
                    <![CDATA[
                [
                    {
                        "assembly_id": "143",
                        "from": "2013-09-09",
                        "to": "2014-09-09"
                    },
                    {
                        "assembly_id": "144",
                        "from": "2014-09-09",
                        "to": null
                    }
                ]
                ]]>
                </output>
            </response>
        </method>
        <method verb="OPTIONS">
            <description>Get available methods for this path</description>
            <response>
                <headers>
                    <param name="Allow" value="list">Allowed methods for this resource</param>
                    <param name="Access-Control-Allow-Origin" value="string">Allow origin from all</param>
                </headers>
            </response>
        </method>
    </resource>

    <resource>
        <path>/loggjafarthing/:id</path>
        <param name="id" value="int">Number of assembly</param>
        <method verb="GET">
            <description>Get one assembly</description>
            <response>
                <output>
                    <![CDATA[
                        {
                            "assembly_id": "144",
                            "from": "2014-09-09",
                            "to": null
                        }
                    ]]>
                </output>
            </response>
        </method>
        <method verb="PUT">
            <description>
                Create new assembly. If the assembly already exists, an error message is returned.
                Will return 201 on success. Could return other error response codes.
                Some clients and servers don't understand the PUT method. In that case it can be overriten
                with a POST method and a X-Http-Method-Override header.

                The ID of the assembly is known, it comes from the official Althingi database or the ID is
                generated else were, (ie. number of assembly is defined by a fixed set of rules.) That is why
                we don't POST an assembly, we PUT it.
            </description>
            <request>
                <headers>
                    <param name="X-Http-Method-Override" value="PUT">Override POST with PUT</param>
                </headers>
                <input>
                    <param name="from" value="date">Start of assembly (YYY-MM-DD)</param>
                    <param name="to" value="date">End of assembly (YYY-MM-DD) (optional)</param>
                </input>
            </request>
            <response>
                <status>
                    <code value="201">Resource created</code>
                    <code value="204">Conflict. If already present.</code>
                </status>
            </response>
        </method>
        <method verb="PATCH">
            <description>
                Update one assembly. This method allows to update only a single (or many) value(s)
                of a given assembly. Some servers and clients don't implement PATCH, it that case
                override POST with PATCH and use X-Http-Method-Override header.
            </description>
            <request>
                <headers>
                    <param name="X-Http-Method-Override" value="PATCH">Override POST with PATCH</param>
                </headers>
                <input>
                    <param name="from" value="date">Start of assembly (YYY-MM-DD) (optional)</param>
                    <param name="to" value="date">End of assembly (YYY-MM-DD) (optional)</param>
                </input>
            </request>
            <response>
                <status>
                    <code value="404">Resource not found</code>
                </status>
            </response>
        </method>
        <method verb="DELETE">
            <description>Delete on resource.</description>
        </method>
        <method verb="OPTIONS">
            <description>Describes this endpoint</description>
        </method>
    </resource>

    <resource>
        <path>/loggjafarthing/:id/thingfundir</path>
        <param name="id" value="int">Number of assembly</param>
        <method verb="GET">
            <description>Get all plenaries from assembly</description>
            <request>
                <headers>
                    <param name="Range" value="items=0-100">Indicate how big the chunk should be</param>
                </headers>
            </request>
            <response>
                <headers>
                    <param name="Content-Range" value="items 0-10/100">How much is returned</param>
                    <param name="Range-Unit" value="items">What kind of items returned</param>
                </headers>
                <status>
                    <code value="206">Partial Content</code>
                </status>
                <output>
                    [
                        {
                            plenary_id: 167,
                            assembly_id: 139,
                            from: "2011-09-17 15:27:43",
                            to: "2011-09-17 17:54:42",
                            name: "167. fundur"
                        },
                        {
                            plenary_id: 166,
                            assembly_id: 139,
                            from: "2011-09-17 09:32:12",
                            to: "2011-09-17 15:24:58",
                            name: "166. fundur"
                        },
                    ]
                </output>
            </response>
        </method>
    </resource>

    <resource>
        <path>/loggjafarthing/:id/thingfundir/:plenary_id</path>
        <param name="id" value="int">Number of assembly</param>
        <param name="plenary_id" value="int">Number of plenary</param>
        <method verb="PUT">
            <description>Put a new plenary into an assembly.</description>
            <request>
                <input>
                    <param value="string" name="name">Name of plenary: 166. fundur</param>
                    <param value="date-time" name="from">Beginning of plenary</param>
                    <param value="date-time" name="to">End of plenary</param>
                </input>
            </request>
        </method>
    </resource>

    <resource>
        <path>/loggjafarthing/:id/thingmal</path>
        <param name="id" value="int">Number of assembly</param>
        <method verb="GET">
            <description>Get all issues for an assembly</description>
            <request>
                <query>
                    <param name="type" value="a|b|l|m|q|s">
                        Any combination of these chars.
                        a  = þingsályktunartillaga.
                        b  = beiðni.
                        l  = lagafrumvarp.
                        m  = fyrirspurn.
                        q  = fyrirspurn.
                        s  = skýrsla.
                    </param>
                </query>
            </request>
            <response>
                <output>
                    [
                        {
                            issue_id: 1,
                            assembly_id: 145,
                            congressman_id: null,
                            category: "A",
                            name: "Fjárlög 2016",
                            sub_name: null,
                            type: "l",
                            type_name: "Frumvarp til laga",
                            type_subname: "Lagafrumvarp",
                            status: "Samþykkt sem lög frá Alþingi.",
                            question: null,
                            date: "2015-09-08 13:01:00"
                        }, {
                            issue_id: 2,
                            assembly_id: 145,
                            congressman_id: null,
                            category: "A",
                            name: "ýmsar forsendur fjárlagafrumvarps 2016",
                            sub_name: "breyting ýmissa laga",
                            type: "l",
                            type_name: "Frumvarp til laga",
                            type_subname: "Lagafrumvarp",
                            status: "Samþykkt sem lög frá Alþingi.",
                            question: null,
                            date: "2015-09-08 13:01:00"
                        },
                        ...
                    ]
                </output>
            </response>
        </method>
    </resource>

    <resource>
        <path>/loggjafarthing/:id/thingmal/:issue_id</path>
        <param name="id" value="int">Number of assembly</param>
        <param name="issue_id" value="int">Number of issue</param>
        <method verb="GET">
            <description>Gets some metadata about an issue</description>
            <response>
                <output>
                    {
                        "issue_id": 1,
                        "assembly_id": 145,
                        "congressman_id": null,
                        "category": "A",
                        "name": "Fjárlög 2016",
                        "sub_name": null,
                        "type": "l",
                        "type_name": "Frumvarp til laga",
                        "type_subname": "Lagafrumvarp",
                        "status": "Samþykkt sem lög frá Alþingi.",
                        "question": null,
                        "date": "2015-09-08 13:01:00",
                        "proponents": [
                            {
                                "congressman_id": 652,
                                "name": "Bjarni Benediktsson",
                                "birth": "1970-01-26",
                                "death": null,
                                "party": null
                            }
                        ],
                        "documents": [
                            {
                                "document_id": 1,
                                "issue_id": 1,
                                "assembly_id": 145,
                                "date": "2015-09-08 13:01:00",
                                "url": "http://www.althingi.is/altext/145/s/0001.html",
                                "type": "stjórnarfrumvarp",
                                "votes": [
                                    {
                                        "vote_id": 51981,
                                        "issue_id": 1,
                                        "assembly_id": 145,
                                        "document_id": 1,
                                        "date": "2015-09-11 20:34:39",
                                        "type": "Frv. gengur til 2. umr.",
                                        "outcome": null,
                                        "method": "yfirlýsing forseta/mál gengur",
                                        "yes": 0,
                                        "no": 0,
                                        "inaction": 0
                                    },
                                ...
                                ]
                            },
                        ...
                        ]
                    }
                </output>
            </response>
        </method>
        <method verb="PUT">
            <description>Create new issue</description>
            <request>
                <input>
                    <param value="string" name="name">Name of issue: fjárlög 2013</param>
                    <param value="string" name="category">málsflokkur, A - B</param>
                    <param value="int" name="type">málstegund</param>
                    <param value="string" name="type_name">heiti - Frumvarp til laga</param>
                    <param value="string" name="type_subname">heiti2 - lagafrumvarp</param>
                </input>
            </request>
        </method>
    </resource>

    <resource>
        <path>/loggjafarthing/:id/thingmal/:issue_id/thingskjal/:document_id</path>
        <param name="id" value="int">Number of assembly</param>
        <param name="issue_id" value="int">Number of issue</param>
        <param name="document_id" value="int">Number of document</param>
        <method verb="PUT">
            <description>Create/Put new document</description>
            <request>
                <input>
                    <param name="type" value="string">Type of document</param>
                    <param name="date" value="date">When document was submitted</param>
                    <param name="url" value="string">URL to original document</param>
                </input>
            </request>
        </method>
    </resource>

    <resource>
        <path>/loggjafarthing/:id/thingmal/:issue_id/thingskjal/:document_id/flutningsmenn/:congressman_id</path>
        <param name="id" value="int">Number of assembly</param>
        <param name="issue_id" value="int">Number of issue</param>
        <param name="document_id" value="int">Number of document</param>
        <param name="congressman_id" value="int">Number of congressman</param>
        <method verb="PUT">
            <description>Connect document to congressman</description>
            <request>
                <input>
                    <param name="order" value="int">Order og which, congressman is connected</param>
                </input>
            </request>
        </method>
    </resource>

    <resource>
        <path>/loggjafarthing/:id/thingmal/:issue_id/atkvaedagreidslur</path>
        <param name="id" value="int">Number of assembly</param>
        <param name="issue_id" value="int">Number of issue</param>
        <method verb="GET">
            <description>Get all votes per issue</description>
            <response>
                <output>
                    [
                        {
                            "vote_id": "51981",
                            "issue_id": "1",
                            "assembly_id": "145",
                            "document_id": "1",
                            "date": "2015-09-11 20:34:39",
                            "type": "Frv. gengur til 2. umr.",
                            "outcome": null,
                            "method": "yfirlýsing forseta/mál gengur",
                            "yes": "0",
                            "no": "0",
                            "inaction": "0"
                        },
                        { ... }
                    ]
                </output>
            </response>
        </method>
        <method verb="OPTIONS">
            <description>Get available options</description>
        </method>
    </resource>

    <resource>
        <path>/loggjafarthing/:id/thingmal/:issue_id/atkvaedagreidslur/:vote_id</path>
        <param name="id" value="int">Number of assembly</param>
        <param name="issue_id" value="int">Number of issue</param>
        <param name="vote_id" value="int">Number of vote</param>
        <method verb="GET">
            <description>Get on vote</description>
            <response>
                <output>
                    {
                        "vote_id": "51992",
                        "issue_id": "6",
                        "assembly_id": "145",
                        "document_id": "6",
                        "date": "2015-09-14 19:02:20",
                        "type": "Till. gengur til síðari umr.",
                        "outcome": null,
                        "method": "yfirlýsing forseta/mál gengur",
                        "yes": "0",
                        "no": "0",
                        "inaction": "0"
                    }
                </output>
            </response>
        </method>
        <method verb="PUT">
            <description>Create new vote</description>
            <request>
                <input>
                    <param value="date" name="date">Date of vote</param>
                    <param value="string" name="type">Type of vote</param>
                    <param value="string" name="outcome">The outcome</param>
                    <param value="string" name="method">Method used</param>
                    <param value="int" name="yes">Number of yes</param>
                    <param value="int" name="no">Number of no</param>
                    <param value="int" name="inaction">Number of non yes/ non no votes</param>
                </input>
            </request>
        </method>
        <method verb="PATCH">
            <description>Update vote</description>
            <request>
                <input>
                    <param value="date" name="date">Date of vote</param>
                    <param value="string" name="type">Type of vote</param>
                    <param value="string" name="outcome">The outcome</param>
                    <param value="string" name="method">Method used</param>
                    <param value="int" name="yes">Number of yes</param>
                    <param value="int" name="no">Number of no</param>
                    <param value="int" name="inaction">Number of non yes/ non no votes</param>
                </input>
            </request>
        </method>
        <method verb="OPTIONS">
            <description>Get available options</description>
        </method>
    </resource>

    <resource>
        <path>/loggjafarthing/:id/thingmal/:issue_id/atkvaedagreidslur/:vote_id/atkvaedi</path>
        <param name="id" value="int">Number of assembly</param>
        <param name="issue_id" value="int">Number of issue</param>
        <param name="vote_id" value="int">Number of vote</param>
        <method verb="POST">
            <description>Create new vote item, one for each congressman</description>
            <request>
                <input>
                    <param value="int" name="congressman_id">ID of congressman</param>
                    <param value="string" name="vote">Vote</param>
                </input>
            </request>
        </method>
    </resource>

    <resource>
        <path>/loggjafarthing/:id/thingmal/:issue_id/raedur/:speech_id</path>
        <param name="id" value="int">Number of assembly</param>
        <param name="issue_id" value="int">Number of issue</param>
        <param name="speech_id" value="string">ID of speech (from-date with an 'r' in front)</param>
        <method verb="PUT">
            <description>Create/PUT one speech</description>
            <request>
                <input>
                    <param name="from" value="date">Date and time string</param>
                    <param name="to" value="date">Date and time string</param>
                    <param name="plenary_id" value="int">ID of plenary</param>
                    <param name="congressman_id" value="int">ID of congressman</param>
                    <param name="congressman_type" value="int">Type of congressman (optional)</param>
                    <param name="iteration" value="int"> (optional)</param>
                    <param name="type" value="string"> (optional)</param>
                    <param name="text" value="string"> (optional)</param>
                </input>
            </request>
        </method>
    </resource>

    <resource>
        <path>/thingmenn</path>
        <method verb="GET">
            <description>List of all congressmen will be returned in chunks</description>
            <request>
                <headers>
                    <param name="Range" value="items=0-100">Indicate how big the chunk should be</param>
                </headers>
            </request>
            <response>
                <output>
                    [
                        {
                            "congressman_id": "739",
                            "name": "Adda Bára Sigfúsdóttir ",
                            "birth": "1926-12-30",
                            "death": null
                        },
                        {
                            "congressman_id": "646",
                            "name": "Adolf H. Berndsen",
                            "birth": "1959-01-19",
                            "death": null
                        },
                    ]
                </output>
            </response>
        </method>
        <method verb="POST">
            <description>Create new congressman allowing the system to auto-generate the ID</description>
            <request>
                <input>
                    <param name="name" value="string">Name of the congressman</param>
                    <param name="birth" value="date">Date of birth (optional)</param>
                </input>
            </request>
            <response>
                <headers>
                    <param value="string" name="Content-Location">Location of resource.</param>
                </headers>
            </response>
        </method>
    </resource>

    <resource>
        <path>thingmenn/:id</path>
        <param name="id" value="int">ID of congressman</param>
        <method verb="GET">
            <description>Id ID is given, a single congressman is returned</description>
            <response>
                <output>
                    {
                        "congressman_id": "739",
                        "name": "Adda Bára Sigfúsdóttir ",
                        "birth": "1926-12-30",
                        "death": null
                    }
                </output>
            </response>
        </method>
        <method verb="PUT">
            <description>Create new congressman. The ID og the congressman is known. Therefor we don't POST a new one,
            we PUT one in it's place.</description>
            <request>
                <input>
                    <param name="name" value="string">Name of the congressman</param>
                    <param name="birth" value="date">Date of birth (optional)</param>
                </input>
            </request>
        </method>
        <method verb="PATCH">
            <description>Update congressman's properties</description>
            <request>
                <input>
                    <param name="name" value="string">Name of the congressman (optional)</param>
                    <param name="birth" value="date">Date of birth (optional)</param>
                </input>
            </request>
        </method>
    </resource>

    <resource>
        <path>/thingmenn/:id/thingmal</path>
        <param name="id" value="int">ID of congressman</param>
        <method verb="GET">
            <description>Get all issues that this congressman fas a foreman for</description>
            <response>
                <output>
                    [
                        {
                            "issue_id": 15,
                            "assembly_id": 144,
                            "category": "A",
                            "name": "Framtíðargjaldmiðill Íslands",
                            "type": 1,
                            "type_name": "Tillaga til þingsályktunar",
                            "type_subname": "þingsályktunartillaga",
                            "status": null,
                            "foreman": {
                                "congressman_id": "704",
                                "name": "Guðmundur Steingrímsson",
                                "birth": "1972-10-28",
                                "death": null
                            },
                            "time": null
                        },
                        {
                            "issue_id": 123,
                            "assembly_id": 144,
                            "category": "A",
                            "name": "Bætt starfsumhverfi erlendra sérfræðinga",
                            "type": 1,
                            "type_name": "Tillaga til þingsályktunar",
                            "type_subname": "þingsályktunartillaga",
                            "status": null,
                            "foreman": {
                                "congressman_id": "704",
                                "name": "Guðmundur Steingrímsson",
                                "birth": "1972-10-28",
                                "death": null
                            },
                            "time": null
                        },
                    ]
                </output>
            </response>
        </method>
    </resource>

    <resource>
        <path>/thingmenn/:id/thingseta</path>
        <param name="id" value="int">ID of congressman</param>
        <method verb="GET">
            <description>Get all sessions objects for congressman in decending order</description>
            <response>
                <output>
                    [
                        {
                            "session_id": "274",
                            "congressman_id": "124",
                            "from": "2014-11-24",
                            "to": "1970-01-01",
                            "type": "þingmaður",
                            "party": "Sjálfstæðisflokkur"
                        },
                        {
                            "session_id": "273",
                            "congressman_id": "124",
                            "from": "2014-11-17",
                            "to": "2014-11-24",
                            "type": "með varamann",
                            "party": "Sjálfstæðisflokkur"
                        },
                    ]
                </output>
            </response>
        </method>
        <method verb="POST">
            <description>
                When creating new session, and the session_id is not known, this is the method to use. Like some many
                parts of this system when the ID of the resource is known and PUSH is used to create, this is NOT one
                of this things. The session_id is auto-generated in this request and is local to this implementation.
            </description>
            <request>
                <input>
                    <param name="from" value="date">When the session starts</param>
                    <param name="to" value="date">When the session ends (optional)</param>
                    <param name="type" value="string">Type, like 'Varamadur' (optional)</param>
                    <param name="party_id" value="string">ID of of party (optional)</param>
                    <param name="constituency_id" value="string">ID of constituency (optional)</param>
                </input>
            </request>
        </method>
    </resource>

    <resource>
        <path>/thingmenn/:id/thingseta/:session_id</path>
        <param name="id" value="int">ID of congressman</param>
        <param name="session_id" value="int">ID of session</param>
        <method verb="GET">
            <description>Get one session resource</description>
            <response>
                <output>
                    {
                        "session_id": 56,
                        "congressman_id": 678,
                        "from": "2014-12-17",
                        "to": "1970-01-01",
                        "type": "þingmaður",
                        "abbr": null,
                        "constituency": {
                            "id": "52",
                            "name": "Suðvesturkjördæmi",
                            "abbr": "SV"
                        },
                        "party": {
                            "id": "38",
                            "name": "Samfylkingin",
                            "abbr": "Sf"
                        }
                    }
                </output>
            </response>
        </method>
        <method verb="PATCH">
            <description>Update session properties</description>
            <request>
                <input>
                    <param name="from" value="date">When the session starts (optional)</param>
                    <param name="to" value="date">When the session ends (optional)</param>
                    <param name="type" value="string">Type, like 'Varamadur' (optional)</param>
                    <param name="party_id" value="int">ID of of party (optional)</param>
                    <param name="constituency_id" value="int">ID of constituency (optional)</param>
                </input>
            </request>
        </method>
        <method verb="DELETE"></method>
    </resource>

    <resource>
        <path>/thingflokkar/:id</path>
        <method verb="PUT">
            <description>Create one Party</description>
            <request>
                <input>
                    <param name="name" value="string">Name of party</param>
                    <param name="abbr_short" value="string">Party's short abbreviation</param>
                    <param name="abbr_long" value="string">Party's long abbreviation</param>
                </input>
            </request>
        </method>
    </resource>

    <resource>
        <path>/nefndir</path>
        <method verb="GET">
            <description>Get all committees</description>
            <response>
                <output>
                    [
                        {
                            committee_id: 201,
                            name: "allsherjar- og menntamálanefnd",
                            first_assembly_id: 140,
                            last_assembly_id: null,
                            abbr_long: "allsh.- og menntmn.",
                            abbr_short: "am"
                        },{
                            committee_id: 151,
                            name: "allsherjarnefnd",
                            first_assembly_id: 27,
                            last_assembly_id: 139,
                            abbr_long: "allshn.",
                            abbr_short: "a"
                        }
                        ...
                    ]
                </output>
            </response>
        </method>
    </resource>

    <resource>
        <path>/nefndir/:committee_id</path>
        <param name="committee_id" value="int">ID of committee</param>
        <method verb="GET">
            <description>Get one committee</description>
            <response>
                <output>
                    {
                        committee_id: 78,
                        name: "heilbrigðis- og trygginganefnd",
                        first_assembly_id: 93,
                        last_assembly_id: 134,
                        abbr_long: "heilbr.- og trn.",
                        abbr_short: "ht"
                    }
                </output>
            </response>
        </method>
        <method verb="PUT">
            <description>Create one committee</description>
            <request>
                <input>
                    <param name="name" value="string">Name of the committee</param>
                    <param name="first_assembly_id" value="int">Reference to the first assembly</param>
                    <param name="last_assembly_id" value="int">Reference to the last assembly</param>
                    <param name="abbr_short" value="string">Short abbreviation</param>
                    <param name="abbr_long" value="string">Long abbreviation</param>
                </input>
            </request>
        </method>
    </resource>

</root>
